# Lambda

Lambda 允许把函数作为一个方法的参数（函数作为参数传递到方法中）

1、首先定义函数接口

注意函数接口中只能定义一个public方法，其他的方法只能是default或者staic方法。

```java
@FunctionalInterface
public interface NumberOper {
    Integer operNum(Integer a,Integer b);
}
```

2、使用方法

匿名方法

```java
NumberOper addOper=new NumberOper() {
    @Override
    public Integer operNum(Integer a, Integer b) {
        return numberOperFun.add(a,b);
    }
};
addOper.operNum(1,2)
```

简化后

```java
NumberOper numberOper2=(z,y)->{
        return z+y;
};
Integer num2=numberOper2.operNum(1,2);
```

简化后

```java
Integer num3=((NumberOper)(z,y)->{
    return z+y;
}).operNum(2,2);
```

简化后

注意，当方法中只有一条语句的时候才可以去掉{},如果有返回值，要去掉return

```java
Integer num4=((NumberOper)(z,y)-> z+y).operNum(4,2);
```

Lambda代码和普通代码的转换方法：

转为lambda代码：在代码中右键，show context actions 如果转为lambda代码，则选择replace with lambda。

转为普通代码：在代码中右键，show context actions 如果转为lambda代码，则选择replace lambda with an....class

# Stream

## 1、foreach

* List的forEach方法

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));

users.stream().forEach(new Consumer<User>() {
    @Override
    public void accept(User user) {
        System.out.println(user.getName());
    }
});
```

* Map的forEach方法

```java
Map<String,Object> usersMap=new HashMap<>();
    usersMap.put("fzy",new User("冯朝阳",11));
    usersMap.put("st",new User("沈童",20));
    usersMap.put("st1",new User("沈童1",15));
		//先把map转为set类型的再调用stream
    usersMap.entrySet().stream().forEach(new Consumer<Map.Entry<String, Object>>() {
        @Override
        public void accept(Map.Entry<String, Object> stringObjectEntry) {
         System.out.println(stringObjectEntry.getKey()+"|"+JSON.toJSONString(stringObjectEntry.getValue()));
        }
  });
```

## 2、collect

* List转为Map

```java
 ArrayList<User> users=new ArrayList<>();
 users.add(new User("冯朝阳",11));
 users.add(new User("沈童",28));
 users.add(new User("沈童1",10));
 users.add(new User("沈童2",21));

Map<String,User> userMap= users.stream().collect(Collectors.toMap(new Function<User, String>() {
     @Override
     public String apply(User user) {
         return user.getName();
     }
 }, new Function<User, User>() {
     @Override
     public User apply(User user) {
         return user;
     }
 }));
```

* Map转为List

```java
Map<String,Object> usersMap=new HashMap<>();
usersMap.put("fzy",new User("冯朝阳",11));
usersMap.put("st",new User("沈童",20));
usersMap.put("st1",new User("沈童1",15));

List list=usersMap.entrySet().stream().collect(Collectors.toList());
list.stream().forEach(new Consumer() {
    @Override
    public void accept(Object o) {
        System.out.println(JSON.toJSONString(o));
    }
});
```

## 3、filter

* List的过滤

注意过滤时，可以多写几个条件

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));

Stream<User> userStream=users.stream().filter(new Predicate<User>() {
    @Override
    public boolean test(User user) {
        return user.getAge()>20;
    }
});
//这是简写版
userStream.forEach(user -> System.out.println(JSON.toJSONString(user)));
```

* Map的过滤

```java
Map<String,Object> usersMap=new HashMap<>();
usersMap.put("fzy",new User("冯朝阳",11));
usersMap.put("st",new User("沈童",20));
usersMap.put("st1",new User("沈童1",15));
Stream<Map.Entry<String, Object>> stream=usersMap.entrySet().stream().filter(new Predicate<Map.Entry<String, Object>>() {
    @Override
    public boolean test(Map.Entry<String, Object> stringObjectEntry) {
        return stringObjectEntry.getKey().equals("fzy");
    }
});
stream.forEach(new Consumer<Map.Entry<String, Object>>() {
    @Override
    public void accept(Map.Entry<String, Object> stringObjectEntry) {
        System.out.println(stringObjectEntry.getKey());
    }
});
```

## 4、sorted

* List的sorted

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));
Stream<User> userSored=users.stream().sorted(new Comparator<User>() {
    @Override
    public int compare(User o1, User o2) {
        return o1.getAge()-o2.getAge();
    }
});
userSored.forEach(user -> System.out.println(JSON.toJSONString(user)));
```

* Map的sorted

```java
Map<String,User> usersMap=new HashMap<>();
usersMap.put("fzy",new User("冯朝阳",11));
usersMap.put("st",new User("沈童",20));
usersMap.put("st1",new User("沈童1",15));

Stream<Map.Entry<String, User>> stream=usersMap.entrySet().stream().sorted(new Comparator<Map.Entry<String, User>>() {
    @Override
    public int compare(Map.Entry<String, User> o1, Map.Entry<String, User> o2) {
        return o1.getValue().getAge()-o2.getValue().getAge();
    }
});
stream.forEach(stringUserEntry -> System.out.println(JSON.toJSONString(stringUserEntry)));
```

## 5、anyMatch

任何数据匹配则返回true，区别于allMatch是全部匹配才能返回true。

* List

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));

boolean match=users.stream().anyMatch(new Predicate<User>() {
    @Override
    public boolean test(User user) {
        return user.getAge()>10;
    }
});
System.out.println(match);
```

* Map

```java
Map<String,User> usersMap=new HashMap<>();
usersMap.put("fzy",new User("冯朝阳",11));
usersMap.put("st",new User("沈童",20));
usersMap.put("st1",new User("沈童1",15));
boolean match=usersMap.entrySet().stream().anyMatch(new Predicate<Map.Entry<String, User>>() {
    @Override
    public boolean test(Map.Entry<String, User> stringUserEntry) {
        return stringUserEntry.getKey().equals("st");
    }
});
System.out.println(match);
```

## 6、Limit

* List 

获取前几行数据

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));
Stream<User> userStream= users.stream().limit(2);
userStream.forEach(user -> System.out.println(JSON.toJSONString(user)));
```

* Map

注意map用stream前先转为了set

```java
Map<String,User> usersMap=new HashMap<>();
usersMap.put("fzy",new User("冯朝阳",11));
usersMap.put("st",new User("沈童",20));
usersMap.put("st1",new User("沈童1",15));
Stream<Map.Entry<String,User>> map= usersMap.entrySet().stream().limit(1);
map.forEach(new Consumer<Map.Entry<String, User>>() {
    @Override
    public void accept(Map.Entry<String, User> stringUserEntry) {
        System.out.println(stringUserEntry.getKey());
    }
});
```

## 7、skip

跳过前n行取值

* List

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));
users.stream().skip(1).limit(2).forEach(user -> System.out.println(JSON.toJSONString(user)));
```

## 8、reduce

* List

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));
Optional<User> optionalUser=users.stream().reduce(new BinaryOperator<User>() {
    @Override
    public User apply(User user, User user2) {
        System.out.println("11");
        return new User("sum",user.getAge()+user2.getAge());
    }
});
System.out.println(JSON.toJSONString(optionalUser.get()));
```

## 9、distinct

* List

如果list的值一样则会去重，不在乎是同一个对象。

```java
ArrayList<User> users=new ArrayList<>();
users.add(new User("冯朝阳",11));
users.add(new User("沈童",28));
users.add(new User("沈童1",10));
users.add(new User("沈童2",21));
users.add(new User("沈童",28));

Stream<User> stream=users.stream().distinct();
stream.forEach(user -> System.out.println(JSON.toJSONString(user)));
```

# 代理

## 1、静态代理

静态代理特征 1、增强功能

# 工具类

## 1、StringUtils类











